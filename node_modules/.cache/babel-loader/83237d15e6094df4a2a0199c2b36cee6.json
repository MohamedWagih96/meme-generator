{"ast":null,"code":"var _jsxFileName = \"/media/rogue/Rogue/Work/Projects/React/meme-generator/src/components/MemeGenerator.js\";\nimport React from \"react\";\nimport domtoimage from \"dom-to-image\";\nimport Header from \"./Header\";\nimport Body from \"./Body\";\n\nclass MemeGenerator extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      topText: \"\",\n      bottomText: \"\",\n      meme: {\n        name: \"Joker and Peter Parker Dancing\",\n        img: \"https://indianmemetemplates.com/storage/Joker-and-Peter-Parker-Dancing.jpg\",\n        width: 1200,\n        height: 600\n      },\n      memes: []\n    };\n    this.badMemes = [\"28251713\", \"164335977\", \"112126428\", \"93895088\", \"71428573\", \"123999232\", \"178591752\", \"21735\", \"53764\", \"99683372\", \"28034788\", \"14230520\", \"129242436\", \"101910402\", \"124822590\", \"47235368\", \"161865971\", \"56225174\", \"131087935\", \"21604248\", \"21735\", \"101288\", \"134797956\", \"155518747\", \"1035805\", \"157978092\", \"181913649\", \"87743020\", \"438680\", \"188390779\", \"6235864\", \"61539\"];\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleLoad = this.handleLoad.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"https://api.imgflip.com/get_memes\").then(response => response.json()).then(data => {\n      const filteredMemes = this.filterMemes(data.data.memes);\n      this.setState({\n        memes: filteredMemes\n      });\n    }).catch(error => {\n      console.log(\"Error while retrieving data from the server\");\n    });\n  }\n\n  filterMemes(memes) {\n    return memes.filter(meme => !this.badMemes.includes(meme.id)).map(meme => meme);\n  }\n\n  shuffle() {\n    this.toggleVisibility(\"visible\", \"hidden\");\n    let randomIndex = Math.floor(Math.random() * this.state.memes.length);\n    let randomMeme = this.state.memes[randomIndex];\n    this.setState({\n      meme: {\n        name: randomMeme.name,\n        img: randomMeme.url,\n        width: randomMeme.width,\n        height: randomMeme.height\n      }\n    });\n  }\n\n  save() {\n    domtoimage.toJpeg(document.getElementById(\"memeWrapper\"), {\n      quality: 1.0\n    }).then(dataUrl => {\n      //Create a hyperlink\n      let link = document.createElement(\"a\"); //File name\n\n      link.download = this.state.meme.name; //Destination\n\n      link.href = dataUrl;\n      link.click();\n    });\n  }\n\n  toggleVisibility(spinnerVisibility, memeVisibility) {\n    document.getElementById(\"spinner\").style.visibility = spinnerVisibility;\n    document.getElementById(\"memeWrapper\").style.visibility = memeVisibility;\n  }\n\n  handleClick(event) {\n    //To prevent page from automatic refreshing\n    event.preventDefault();\n    const name = event.target.name;\n    if (name === \"shuffleButton\") this.shuffle();else if (name === \"saveButton\") this.save();\n  }\n\n  handleChange(event) {\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleLoad(spinnerVisibility, memeVisibility) {\n    this.toggleVisibility(spinnerVisibility, memeVisibility);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Body, {\n      data: this.state.meme,\n      topText: this.state.topText,\n      bottomText: this.state.bottomText,\n      handleChange: this.handleChange,\n      handleClick: this.handleClick,\n      handleLoad: this.handleLoad,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default MemeGenerator;","map":{"version":3,"sources":["/media/rogue/Rogue/Work/Projects/React/meme-generator/src/components/MemeGenerator.js"],"names":["React","domtoimage","Header","Body","MemeGenerator","Component","constructor","state","topText","bottomText","meme","name","img","width","height","memes","badMemes","handleChange","bind","handleClick","handleLoad","componentDidMount","fetch","then","response","json","data","filteredMemes","filterMemes","setState","catch","error","console","log","filter","includes","id","map","shuffle","toggleVisibility","randomIndex","Math","floor","random","length","randomMeme","url","save","toJpeg","document","getElementById","quality","dataUrl","link","createElement","download","href","click","spinnerVisibility","memeVisibility","style","visibility","event","preventDefault","target","value","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport domtoimage from \"dom-to-image\";\n\nimport Header from \"./Header\";\nimport Body from \"./Body\";\n\nclass MemeGenerator extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            topText: \"\",\n            bottomText: \"\",\n            meme: {\n                name: \"Joker and Peter Parker Dancing\",\n                img: \"https://indianmemetemplates.com/storage/Joker-and-Peter-Parker-Dancing.jpg\",\n                width: 1200,\n                height: 600\n            },\n            memes: []\n        };\n\n        this.badMemes = [\n            \"28251713\", \"164335977\", \"112126428\", \"93895088\", \"71428573\", \"123999232\",\n            \"178591752\", \"21735\", \"53764\", \"99683372\", \"28034788\", \"14230520\", \"129242436\",\n            \"101910402\", \"124822590\", \"47235368\", \"161865971\", \"56225174\", \"131087935\", \n            \"21604248\", \"21735\", \"101288\", \"134797956\", \"155518747\", \"1035805\", \"157978092\", \n            \"181913649\", \"87743020\", \"438680\", \"188390779\", \"6235864\", \"61539\"\n        ];\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleClick = this.handleClick.bind(this);  \n        this.handleLoad = this.handleLoad.bind(this); \n    }\n\n    componentDidMount() {\n        fetch(\"https://api.imgflip.com/get_memes\")\n        .then(response => response.json())\n        .then(data => {\n            const filteredMemes = this.filterMemes(data.data.memes);\n\n            this.setState({\n                memes: filteredMemes\n            });\n        })\n        .catch(error => {\n            console.log(\"Error while retrieving data from the server\")\n        })\n    }\n\n    filterMemes(memes) {\n        return memes.filter(meme => !(this.badMemes.includes(meme.id)))\n                    .map(meme => meme);\n    }\n\n    shuffle() {\n        this.toggleVisibility(\"visible\", \"hidden\");\n\n        let randomIndex = Math.floor(Math.random() * this.state.memes.length);\n        let randomMeme = this.state.memes[randomIndex];\n\n        this.setState({\n            meme: {\n                name: randomMeme.name,\n                img: randomMeme.url,\n                width: randomMeme.width,\n                height: randomMeme.height\n            }\n        });\n    }\n\n    save() {\n        domtoimage.toJpeg(document.getElementById(\"memeWrapper\"), {quality: 1.0})\n        .then(dataUrl => {\n            //Create a hyperlink\n            let link = document.createElement(\"a\");\n            //File name\n            link.download = this.state.meme.name;\n            //Destination\n            link.href = dataUrl;\n            link.click();\n        });\n    }\n\n    toggleVisibility(spinnerVisibility, memeVisibility) {\n        document.getElementById(\"spinner\").style.visibility = spinnerVisibility;\n        document.getElementById(\"memeWrapper\").style.visibility = memeVisibility;\n    }\n\n    handleClick(event) {\n        //To prevent page from automatic refreshing\n        event.preventDefault();\n        const {name} = event.target;\n\n        if(name === \"shuffleButton\") this.shuffle();\n        else if(name === \"saveButton\") this.save();\n    }\n\n    handleChange(event) {\n        const {name, value} = event.target;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    handleLoad(spinnerVisibility, memeVisibility) {\n        this.toggleVisibility(spinnerVisibility, memeVisibility);\n    }\n\n    render() {\n    \treturn(\n\t        <div>\n\t            <Header />\n\t            <Body \n\t            \tdata = {this.state.meme}\n\t            \ttopText = {this.state.topText}\n\t                bottomText = {this.state.bottomText}\n\t                handleChange = {this.handleChange}\n\t                handleClick = {this.handleClick}\n                \thandleLoad = {this.handleLoad}\n\t            />\n\t        </div>\n\t    );\n    }\n}\n\nexport default MemeGenerator;"]},"metadata":{},"sourceType":"module"}