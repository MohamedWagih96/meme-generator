{"ast":null,"code":"var _jsxFileName = \"/media/rogue/Rogue/Work/Projects/React/meme-generator/src/components/MemeGenerator.js\";\nimport React from \"react\";\nimport domtoimage from 'dom-to-image';\nimport Form from \"./Form\";\nimport Meme from \"./Meme\";\nimport \"./MemeGenerator.css\";\n\nclass MemeGenerator extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      topText: \"\",\n      bottomText: \"\",\n      meme: {\n        name: \"Joker and Mini Joker\",\n        img: \"https://i.imgur.com/XTNyiVw.png\",\n        width: \"\",\n        height: \"\"\n      },\n      memez: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  componentDidMount() {\n    fetch(\"https://api.imgflip.com/get_memes\").then(response => response.json()).then(data => {\n      this.setState({\n        memez: data.data.memes\n      });\n    }).catch(error => {\n      console.log(\"Error while retrieving data from the server\");\n    });\n  }\n\n  shuffle() {\n    let randomIndex = Math.floor(Math.random() * this.state.memez.length);\n    let randomMeme = this.state.memez[randomIndex];\n    this.setState({\n      meme: {\n        name: randomMeme.name,\n        img: randomMeme.url,\n        width: randomMeme.width,\n        height: randomMeme.height\n      }\n    });\n  }\n\n  save() {\n    domtoimage.toJpeg(document.getElementById(\"memeWrapper\"), {\n      quality: 1.0,\n      width: this.state.meme.width,\n      height: this.state.height\n    }).then(dataUrl => {\n      let link = document.createElement(\"a\");\n      link.download = this.state.memeName;\n      link.href = dataUrl;\n      link.click();\n    });\n  }\n\n  handleClick(event) {\n    //To prevent page from automatic refreshing\n    event.preventDefault();\n    const name = event.target.name;\n    if (name === \"shuffleButton\") this.shuffle();else if (name === \"saveButton\") this.save();\n  }\n\n  handleChange(event) {\n    const _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n    this.setState({\n      [name]: value\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"memeGeneratorBody\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(Form, {\n      topText: this.state.topText,\n      bottomText: this.state.bottomText,\n      handleChange: this.handleChange,\n      handleClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(Meme, {\n      url: this.state.meme.img,\n      topText: this.state.topText,\n      bottomText: this.state.bottomText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default MemeGenerator;","map":{"version":3,"sources":["/media/rogue/Rogue/Work/Projects/React/meme-generator/src/components/MemeGenerator.js"],"names":["React","domtoimage","Form","Meme","MemeGenerator","Component","constructor","state","topText","bottomText","meme","name","img","width","height","memez","handleChange","bind","handleClick","componentDidMount","fetch","then","response","json","data","setState","memes","catch","error","console","log","shuffle","randomIndex","Math","floor","random","length","randomMeme","url","save","toJpeg","document","getElementById","quality","dataUrl","link","createElement","download","memeName","href","click","event","preventDefault","target","value","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport domtoimage from 'dom-to-image';\n\nimport Form from \"./Form\";\nimport Meme from \"./Meme\";\nimport \"./MemeGenerator.css\";\n\n\nclass MemeGenerator extends React.Component {\n    constructor() {\n        super();\n\n        this.state = {\n            topText: \"\",\n            bottomText: \"\",\n            meme: {\n                name: \"Joker and Mini Joker\",\n                img: \"https://i.imgur.com/XTNyiVw.png\",\n                width: \"\",\n                height: \"\",\n            },\n            memez: []\n        };\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    componentDidMount() {\n        fetch(\"https://api.imgflip.com/get_memes\")\n        .then(response => response.json())\n        .then(data => {\n            this.setState({\n                memez: data.data.memes\n            })\n        })\n        .catch(error => {\n            console.log(\"Error while retrieving data from the server\")\n        })\n    }\n\n    shuffle() {\n        let randomIndex = Math.floor(Math.random() * this.state.memez.length);\n        let randomMeme = this.state.memez[randomIndex];\n        this.setState({\n            meme: {\n                name: randomMeme.name,\n                img: randomMeme.url,\n                width: randomMeme.width,\n                height: randomMeme.height\n            }\n        });\n    }\n\n    save() {\n        domtoimage.toJpeg(document.getElementById(\"memeWrapper\"), {quality: 1.0, width: this.state.meme.width, height: this.state.height})\n        .then(dataUrl => {\n            let link = document.createElement(\"a\");\n            link.download = this.state.memeName;\n            link.href = dataUrl;\n            link.click();\n        });\n    }\n\n    handleClick(event) {\n        //To prevent page from automatic refreshing\n        event.preventDefault();\n        const {name} = event.target;\n\n        if(name === \"shuffleButton\") this.shuffle();\n        else if(name === \"saveButton\") this.save();\n    }\n\n    handleChange(event) {\n        const {name, value} = event.target;\n\n        this.setState({\n            [name]: value\n        });\n    }\n\n    render() {\n        return(\n            <div className = \"memeGeneratorBody\">\n                <Form \n                    topText = {this.state.topText}\n                    bottomText = {this.state.bottomText}\n                    handleChange = {this.handleChange}\n                    handleClick = {this.handleClick}\n                />\n                \n                <Meme \n                    url = {this.state.meme.img}\n                    topText = {this.state.topText}\n                    bottomText = {this.state.bottomText}\n                />         \n            </div>\n        );\n    }\n}\n\n\nexport default MemeGenerator;"]},"metadata":{},"sourceType":"module"}